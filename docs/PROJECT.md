# Project State

## Current Stage
MVP — одностраничный калькулятор прибыли для продавцов Kaspi, реализованный как фронтенд‑приложение без собственного бэкенда.

## Architecture Overview
Приложение представляет собой SPA на React + TypeScript, собираемое Vite. Вся бизнес‑логика расчёта прибыли и комиссий выполняется в браузере на стороне клиента.

Основные модули (планируемая структура):

- `src/app/` — корневой `App`, инициализация приложения, подключение глобальных стилей.
- `src/features/calculator/` — домен калькулятора:
  - `components/CalculatorForm.tsx` — форма ввода данных (цена продажи, комиссия Kaspi, город доставки, диапазон цены, вес товара, упаковка, себестоимость).
  - `components/CalculatorResult.tsx` — отображение рассчитанной прибыли и вспомогательной информации.
  - `model/calculatorLogic.ts` — чистые функции расчёта комиссий и прибыли.
  - `model/types.ts` — типы входных данных и результата расчёта.
- `src/shared/ui/` — переиспользуемые UI‑компоненты (кнопка, инпут, селект и т.п.).
- `src/shared/lib/` — общие утилиты (форматирование валюты, валидация, работа с константами и тарифами).
- `src/styles/` — глобальные стили и тема, повторяющие внешний вид оригинального калькулятора ProKaspi.

Тестирование:

- Unit‑тесты для бизнес‑логики в `src/features/calculator/model/__tests__/calculatorLogic.test.ts` (Vitest).
- В перспективе e2e‑тесты пользовательского сценария ввода данных и получения результата через Playwright.

## What Exists

- Документация по процессу разработки:
  - `docs/WORKFLOW.md`
  - `docs/TESTING.md`
  - `docs/MCP.md`
  - `.cursor/rules.md`
- Инициализированный git‑репозиторий под проект `prokaspi-calculator`.
- Планируемая архитектура фронтенда (см. раздел Architecture Overview).
- Реального кода приложения и тестов пока нет, coverage = 0%. Цель — покрыть бизнес‑логику калькулятора unit‑тестами на 100% после реализации.

## Recent Changes

- 2026‑02‑24 — создан скелет проекта, добавлены правила, MCP‑конфигурация и базовая документация (см. `docs/CHANGELOG.md`).
- 2026‑02‑25 — описана архитектура фронтенда и цели для калькулятора ProKaspi в этом файле.

## Next Focus

- Подготовить спецификацию калькулятора в `docs/specs/calculator.md`:
  - формулы и правила расчёта комиссий и прибыли;
  - зависимости от города доставки, диапазона цены и веса;
  - граничные случаи и проверка корректности ввода.
- Создать фронтовый скелет (Vite + React + TypeScript) с layout и стилями, максимально повторяющими внешний вид [`online.prokaspi.kz/calculator`](https://online.prokaspi.kz/calculator).
- Реализовать функции расчёта в `calculatorLogic.ts` и покрыть их unit‑тестами.
- Настроить бесплатный деплой статического билда:
  - основной вариант — Cloudflare Pages (деплой `dist/` из репозитория);
  - альтернативный вариант — GitHub Pages с публикацией содержимого `dist/`.